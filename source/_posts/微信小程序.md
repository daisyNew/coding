---
title: 微信小程序

date: 2016-12-14 
---

![微信 icon](http://img.mp.itc.cn/upload/20161228/bb0da180ff7245cdac00c9bad8bc81ec.png)

最近微信小程序大热，我又从一名iOS开发转战到小程序啦，真成了社会主义的一板砖，哪里需要哪里搬！废话不多说，一下是小程序的一些介绍以及开发遇坑的解决办法。

## 简介

**微信小程序**,是一种无需下载，扫一扫或者搜一搜就可以打开的应用，充分体现了微信"触手可及、用完即走"的理念。 

## 小程序与APP

* 小程序无需安装，APP需从相关应用市场下载。
* 小程序类似于webApp,基于微信，APP相对独立。
* 小程序目前还不成熟，很多APP支持的功能，小程序不支持，且部分功能有限。

## 小程序开发

小程序有一套官方提供的控件与API，且官网有提供开发文档及相关demo，但文档尚不完善，很多地方没有覆盖。开发工具也不太成熟，导致开发中有一定的难度。

### 小程序初始化

通常初始化的小程序都包含如下三个文件：


* .js 为脚本文件。这个文件用于坚挺并处理小程序的生命周期函数、生命全局变量。
* .json是配置文件。这个文件是对整个小程序的全局配置。这个文件不能添加任何注释。
* .wxss是样式表文件。这个文件是整个小程序的公共样式表。我们可以在页面组件的class属性上直接使用app.wxss中声明的样式规则。

小程序会读取以上文件，并生成小程序实例。


### 创建文件

初始化小程序之后，我们就需要给小程序添加我们需要实现的功能了，那么第一步就是创建文件。

创建文件时，文件夹名以及内部文件名需要一致，便于微信找到对应的文件进行渲染。

创建完毕之后，别忘了将该页面的【路径+页面名】写在app.json的pages中，如果你的小程序有tabbar，那tabbar的几个页面一定要按顺序些哦。

每一个小程序页面由四个不同后缀名的文件组成。如：

 
 
* .js 脚本文件
* .json 配置文件
* .wxss 样式表文件，用css来规范页面样式，但是有些css小程序不支持。
* .wxml  页面结构文件，用于完成页面结构的设置。


### 开发过程中遇到的坑

1. 微信api尚不完善，所以在开发过程中需要使用js来编写，但是有些js这里面是不支持的。比如在小程序中不能使用window对象，微信解释说：页面的脚本逻辑是在JsCore中运行的，JsCore是一个没有窗口对象的环境，所以不能在脚本中使用window，也无法在脚本中操作组件。
2. 缓存、下载的文件大小有限制。
3. 无法跳转外链，在我完成小程序的期间不能分享，不过现在可以分享了。
4. 网络请求必须支持HTTPS，且相关域名需要去小程序后台进行配置，只有配置过得才可以正常使用，不过一个月最多可以配置三次，多了就不可以了。
